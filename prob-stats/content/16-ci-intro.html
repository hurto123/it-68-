<!DOCTYPE html>
<html class="theme-light" lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="บทที่ 16 บทนำสู่การประมาณค่าและช่วงความเชื่อมั่น อธิบายโครงสร้างทองคำและการตีความ พร้อมเครื่องมือสร้างช่วงความเชื่อมั่นแบบโต้ตอบ" />
  <title>บทที่ 16 • บทนำสู่การประมาณค่าและช่วงความเชื่อมั่น</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="print.css" media="print" />
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]']]
      },
      svg: { fontCache: 'global' },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea']
      }
    };
  </script>
  <script defer src="assets/js/reading-tools.js"></script>
  <style>
    :root {
      color-scheme: dark;
      --bg: #04040c;
      --surface: rgba(12, 16, 30, 0.92);
      --surface-alt: rgba(18, 22, 40, 0.85);
      --surface-soft: rgba(22, 28, 48, 0.7);
      --text: #f4f6ff;
      --muted: #98a4c7;
      --accent: #ffa8a8;
      --accent-soft: rgba(255, 168, 168, 0.18);
      --border: rgba(255, 168, 168, 0.18);
      --ok: #6ee7d5;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at 16% -6%, rgba(255, 168, 168, 0.22), transparent 58%),
                  radial-gradient(circle at 88% 8%, rgba(110, 231, 213, 0.18), transparent 60%),
                  var(--bg);
      color: var(--text);
      font: 16px/1.75 'Sarabun', 'Noto Sans Thai', system-ui, sans-serif;
    }

    header {
      background: linear-gradient(135deg, rgba(18, 20, 38, 0.95), rgba(255, 168, 168, 0.25));
      border-bottom: 1px solid var(--border);
      box-shadow: 0 18px 48px rgba(6, 10, 22, 0.55);
    }

    header .wrap,
    main,
    footer .wrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1.25rem 1.4rem 1.6rem;
    }

    h1,
    h2,
    h3 { line-height: 1.25; margin: 0.25rem 0 0.6rem; }
    h1 { font-size: clamp(1.9rem, 4vw, 2.5rem); }
    h2 { font-size: clamp(1.34rem, 3vw, 1.88rem); }
    h3 { font-size: clamp(1.12rem, 2.6vw, 1.4rem); }

    p,
    ul,
    ol { margin: 0.45rem 0 0.75rem; }

    .hero {
      background: var(--surface);
      border-radius: 22px;
      border: 1px solid var(--border);
      padding: clamp(1.35rem, 2.4vw, 2.1rem);
      display: grid;
      gap: 0.9rem;
      box-shadow: 0 20px 52px rgba(7, 10, 20, 0.48);
    }

    .hero p { color: var(--muted); margin: 0; }

    .eyebrow {
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
      font-size: 0.78rem;
    }

    .pill-row { display: flex; flex-wrap: wrap; gap: 0.55rem; }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      background: rgba(24, 26, 52, 0.82);
      border-radius: 999px;
      padding: 0.4rem 0.95rem;
      border: 1px solid rgba(255, 255, 255, 0.06);
      font-size: 0.88rem;
    }

    main.wrap,
    main,
    .wrap main { display: grid; gap: 1.25rem; }

    .card {
      background: var(--surface);
      border-radius: 20px;
      border: 1px solid var(--border);
      padding: clamp(1.1rem, 2vw, 1.75rem);
      box-shadow: 0 18px 44px rgba(6, 10, 20, 0.45);
    }

    .grid { display: grid; gap: 1rem; }
    @media (min-width: 900px) {
      .grid.two { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    .callout {
      background: var(--surface-alt);
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      padding: 0.9rem 1rem;
    }

    .muted { color: var(--muted); }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.6rem;
      font-size: 0.95rem;
    }

    th,
    td {
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      padding: 0.45rem 0.35rem;
      text-align: left;
    }

    th { color: var(--muted); font-weight: 600; }

    .lab {
      background: var(--surface-alt);
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      padding: 1.1rem 1.25rem;
      display: grid;
      gap: 1rem;
    }

    .lab label {
      display: grid;
      gap: 0.3rem;
      font-weight: 600;
      font-size: 0.95rem;
    }

    .lab input,
    .lab select {
      background: rgba(10, 12, 28, 0.65);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 12px;
      padding: 0.55rem 0.75rem;
      color: var(--text);
      font: inherit;
    }

    .svg-box {
      background: var(--surface-soft);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      padding: 0.75rem;
    }

    svg { width: 100%; height: auto; }

    footer {
      border-top: 1px solid var(--border);
      background: rgba(8, 10, 24, 0.9);
    }

    footer p { margin: 0; color: var(--muted); font-size: 0.92rem; }
  </style>
</head>
<body>
  <header>
    <div class="wrap hero">
      <span class="eyebrow">บทที่ 16</span>
      <h1>บทนำสู่การประมาณค่าและช่วงความเชื่อมั่น</h1>
      <p>จากการเดาแบบจุดเดียว สู่การให้ “ช่วง” ที่ครอบคลุมค่าจริงพร้อมระดับความเชื่อมั่นที่กำหนด</p>
      <div class="pill-row">
        <span class="pill">Point vs Interval</span>
        <span class="pill">Margin of Error</span>
        <span class="pill">Confidence Level</span>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <h2>1. ทำไมต้องประมาณค่าเป็น “ช่วง”</h2>
      <p>การประมาณค่าแบบจุด (Point Estimate) ให้ตัวเลขเดียว เช่น \(\bar{x} = 1500\) บาท ซึ่งแทบไม่เคยตรงกับค่าจริงพอดี การให้ “ช่วง” ช่วยเพิ่มความน่าเชื่อถือเพราะครอบคลุมความไม่แน่นอนของการสุ่ม</p>
      <ul>
        <li><strong>Point Estimate:</strong> ตัวเลขที่ดีที่สุดจากตัวอย่าง เช่น \(\bar{x}, \hat{p}\)</li>
        <li><strong>Interval Estimate:</strong> ขอบล่าง – ขอบบน ที่มีโอกาสครอบค่าพารามิเตอร์จริง</li>
      </ul>
    </section>

    <section class="card">
      <h2>2. โครงสร้างทองคำของช่วงความเชื่อมั่น</h2>
      <p class="callout">ช่วงความเชื่อมั่น = (ตัวประมาณค่า) ± (ค่าวิกฤต × ความคลาดเคลื่อนมาตรฐาน)</p>
      <div class="grid two">
        <article class="callout">
          <h3>องค์ประกอบ</h3>
          <ul>
            <li><strong>ตัวประมาณค่า (Point Estimate)</strong>: เช่น \(\bar{x}, \hat{p}\)</li>
            <li><strong>ค่าวิกฤต (Critical Value)</strong>: จากตาราง Z หรือ t ตามระดับความเชื่อมั่น</li>
            <li><strong>ความคลาดเคลื่อนมาตรฐาน (SE)</strong>: วัดความผันผวนของค่าสถิติ</li>
          </ul>
        </article>
        <article class="callout">
          <h3>ระดับความเชื่อมั่น</h3>
          <p>95% → \(\alpha = 0.05\) หมายถึง หากทำซ้ำ 100 ครั้ง จะมี ~95 ครั้งที่ช่วงครอบค่าจริง</p>
          <table>
            <thead><tr><th>ระดับ</th><th>Z</th></tr></thead>
            <tbody>
              <tr><td>90%</td><td>1.645</td></tr>
              <tr><td>95%</td><td>1.960</td></tr>
              <tr><td>99%</td><td>2.576</td></tr>
            </tbody>
          </table>
        </article>
      </div>
    </section>

    <section class="card">
      <h2>3. การตีความที่ถูกต้อง</h2>
      <ul>
        <li>ช่วงความเชื่อมั่น 95% ไม่ได้แปลว่า “มีโอกาส 95% ที่ \(\mu\) อยู่ในช่วงนี้” เพราะ \(\mu\) เป็นค่าคงที่</li>
        <li>การตีความที่ถูกคือ “ถ้าสร้างช่วงแบบนี้ซ้ำ ๆ จะมี 95% ของช่วงที่ครอบ \(\mu\) จริง”</li>
        <li>ระดับนัยสำคัญ \(\alpha = 1 - \text{Confidence Level}\) คือความเสี่ยงที่ช่วงพลาด</li>
      </ul>
    </section>

    <section class="card">
      <h2>4. ตัวอย่าง</h2>
      <p>สุ่มนักศึกษา 100 คนได้ \(\bar{x} = 1500\) บาท, \(\sigma = 400\) บาท ต้องการช่วงความเชื่อมั่น 95%</p>
      <ol>
        <li>\(SE = \sigma/\sqrt{n} = 400/10 = 40\)</li>
        <li>\(E = Z_{0.025} \times SE = 1.96 \times 40 = 78.4\)</li>
        <li>ช่วง = 1500 ± 78.4 → (1421.6, 1578.4)</li>
      </ol>
      <p class="callout">ตีความ: เรามีความเชื่อมั่น 95% ว่าค่าใช้จ่ายเฉลี่ยจริงอยู่ระหว่าง 1,421.6 ถึง 1,578.4 บาท</p>
    </section>

    <section class="card" id="ci-tool">
      <h2>5. Interactive Lab: สร้างช่วงความเชื่อมั่น</h2>
      <p>เลือกสถานการณ์ ป้อนข้อมูล แล้วดูช่วงที่ได้พร้อมการแสดงผลแบบภาพ</p>
      <div class="lab">
        <label>สถานการณ์
          <select id="mode">
            <option value="mean-known">ค่าเฉลี่ย (รู้ \(\sigma\))</option>
            <option value="prop">สัดส่วน (\(\hat{p}\))</option>
            <option value="custom">Custom (กรอก Critical × SE เอง)</option>
          </select>
        </label>
        <div id="inputs-mean" class="grid two">
          <label>ค่าเฉลี่ยตัวอย่าง \(\bar{x}\)
            <input id="mean-xbar" type="number" value="1500" step="0.1" />
          </label>
          <label>ส่วนเบี่ยงเบนมาตรฐานประชากร \(\sigma\)
            <input id="mean-sigma" type="number" value="400" min="0.1" step="0.1" />
          </label>
          <label>ขนาดตัวอย่าง \(n\)
            <input id="mean-n" type="number" value="100" min="1" step="1" />
          </label>
          <label>ระดับความเชื่อมั่น
            <select id="mean-level">
              <option value="0.90">90%</option>
              <option value="0.95" selected>95%</option>
              <option value="0.99">99%</option>
            </select>
          </label>
        </div>
        <div id="inputs-prop" class="grid two" hidden>
          <label>สัดส่วนตัวอย่าง \(\hat{p}\)
            <input id="prop-phat" type="number" value="0.3" min="0.01" max="0.99" step="0.01" />
          </label>
          <label>ขนาดตัวอย่าง \(n\)
            <input id="prop-n" type="number" value="200" min="1" step="1" />
          </label>
          <label>ระดับความเชื่อมั่น
            <select id="prop-level">
              <option value="0.90">90%</option>
              <option value="0.95" selected>95%</option>
              <option value="0.99">99%</option>
            </select>
          </label>
        </div>
        <div id="inputs-custom" class="grid two" hidden>
          <label>ตัวประมาณค่า (Point Estimate)
            <input id="custom-point" type="number" value="50" step="0.01" />
          </label>
          <label>ค่าวิกฤต × SE (Margin of Error)
            <input id="custom-margin" type="number" value="5" min="0" step="0.01" />
          </label>
        </div>
        <div class="svg-box">
          <svg id="ci-svg" viewBox="0 0 460 200" role="img" aria-label="ภาพช่วงความเชื่อมั่น"></svg>
        </div>
        <div class="callout" id="ci-summary"></div>
      </div>
    </section>

    <section class="card">
      <h2>6. Checklist ก่อนสร้างช่วงความเชื่อมั่น</h2>
      <ul>
        <li>ตัวอย่างสุ่มและเป็นอิสระ</li>
        <li>ตรวจสอบเงื่อนไขการใช้โมเดล (เช่น ขนาดตัวอย่างใหญ่พอ หรือประชากรใกล้ปกติ)</li>
        <li>เลือกระดับความเชื่อมั่นที่สมดุลระหว่างความกว้างของช่วงและความเสี่ยง</li>
      </ul>
    </section>

    <section class="card">
      <h2>Self Check 🔍</h2>
      <ol>
        <li>Margin of Error ประกอบด้วยอะไรบ้าง?</li>
        <li>ทำไมช่วงความเชื่อมั่น 99% กว้างกว่า 95%?</li>
        <li>เราจะตีความช่วงความเชื่อมั่นให้ถูกต้องได้อย่างไร?</li>
      </ol>
      <details>
        <summary>เฉลย</summary>
        <ul>
          <li>ค่าวิกฤต × ความคลาดเคลื่อนมาตรฐานของค่าสถิติ</li>
          <li>เพราะต้องเพิ่มพื้นที่ครอบคลุมให้มากขึ้น → ใช้ค่าวิกฤตที่ใหญ่กว่า</li>
          <li>กล่าวว่า “ถ้าสร้างช่วงแบบนี้ซ้ำ ๆ จะมี x% ของช่วงที่ครอบค่าจริง” ไม่ใช่โอกาสที่ค่าจริงอยู่ในช่วง</li>
        </ul>
      </details>
    </section>
  </main>

  <footer>
    <div class="wrap">
      <p>© 2025 Prob &amp; Stats Interactive Notes — Lesson 16 Confidence Interval Intro</p>
    </div>
  </footer>

  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script>
    const modeSelect = document.getElementById('mode');
    const ciSvg = document.getElementById('ci-svg');
    const ciSummary = document.getElementById('ci-summary');

    const inputsMean = document.getElementById('inputs-mean');
    const inputsProp = document.getElementById('inputs-prop');
    const inputsCustom = document.getElementById('inputs-custom');

    const meanXbar = document.getElementById('mean-xbar');
    const meanSigma = document.getElementById('mean-sigma');
    const meanN = document.getElementById('mean-n');
    const meanLevel = document.getElementById('mean-level');

    const propPhat = document.getElementById('prop-phat');
    const propN = document.getElementById('prop-n');
    const propLevel = document.getElementById('prop-level');

    const customPoint = document.getElementById('custom-point');
    const customMargin = document.getElementById('custom-margin');

    const zMap = {
      '0.90': 1.645,
      '0.95': 1.96,
      '0.99': 2.576
    };

    function drawInterval(lower, point, upper, label) {
      const min = lower - (upper - lower) * 0.2;
      const max = upper + (upper - lower) * 0.2;
      const scale = x => 30 + ((x - min) / (max - min)) * 400;
      const mid = scale(point);
      const low = scale(lower);
      const high = scale(upper);

      ciSvg.innerHTML = `
        <rect x="0" y="0" width="460" height="200" rx="22" fill="rgba(255,255,255,0.02)" stroke="rgba(255,255,255,0.05)" />
        <line x1="30" x2="430" y1="120" y2="120" stroke="rgba(255,255,255,0.08)" />
        <line x1="${low.toFixed(2)}" x2="${high.toFixed(2)}" y1="120" y2="120" stroke="rgba(255,168,168,0.85)" stroke-width="6" stroke-linecap="round" />
        <circle cx="${mid.toFixed(2)}" cy="120" r="7" fill="#6ee7d5" />
        <text x="${low.toFixed(2)}" y="95" text-anchor="middle" font-size="13" fill="#d5d0e5">L = ${lower.toFixed(2)}</text>
        <text x="${high.toFixed(2)}" y="95" text-anchor="middle" font-size="13" fill="#d5d0e5">U = ${upper.toFixed(2)}</text>
        <text x="${mid.toFixed(2)}" y="150" text-anchor="middle" font-size="14" fill="#6ee7d5">Point = ${point.toFixed(2)}</text>
        <text x="230" y="180" text-anchor="middle" font-size="13" fill="#c7cbe0">${label}</text>
      `;
    }

    function toggleInputs(mode) {
      inputsMean.hidden = mode !== 'mean-known';
      inputsProp.hidden = mode !== 'prop';
      inputsCustom.hidden = mode !== 'custom';
    }

    function update() {
      const mode = modeSelect.value;
      toggleInputs(mode);

      if (mode === 'mean-known') {
        const xbar = Number(meanXbar.value);
        const sigma = Math.max(0.01, Number(meanSigma.value));
        const n = Math.max(1, Number(meanN.value));
        const level = meanLevel.value;
        const z = zMap[level];
        const se = sigma / Math.sqrt(n);
        const margin = z * se;
        const lower = xbar - margin;
        const upper = xbar + margin;
        drawInterval(lower, xbar, upper, `CI ${Number(level) * 100}% (Z = ${z})`);
        ciSummary.innerHTML = `
          <p><strong>Margin of Error</strong> = ${margin.toFixed(2)} (Z × SE)</p>
          <p class="muted">SE = σ/√n = ${se.toFixed(2)}</p>
          <p>ช่วงความเชื่อมั่น: (${lower.toFixed(2)}, ${upper.toFixed(2)})</p>
        `;
      } else if (mode === 'prop') {
        const phat = Math.min(0.99, Math.max(0.01, Number(propPhat.value)));
        const n = Math.max(1, Number(propN.value));
        const level = propLevel.value;
        const z = zMap[level];
        const se = Math.sqrt((phat * (1 - phat)) / n);
        const margin = z * se;
        const lower = phat - margin;
        const upper = phat + margin;
        drawInterval(lower, phat, upper, `CI ${Number(level) * 100}% สำหรับ p`);
        ciSummary.innerHTML = `
          <p><strong>Margin of Error</strong> = ${margin.toFixed(3)}</p>
          <p class="muted">np = ${(n * phat).toFixed(1)}, n(1-p) = ${(n * (1 - phat)).toFixed(1)} → ${n * phat >= 10 && n * (1 - phat) >= 10 ? 'ผ่านเงื่อนไข' : 'ควรเพิ่ม n'}</p>
          <p>ช่วง: (${lower.toFixed(3)}, ${upper.toFixed(3)})</p>
        `;
      } else {
        const point = Number(customPoint.value);
        const margin = Math.max(0, Number(customMargin.value));
        const lower = point - margin;
        const upper = point + margin;
        drawInterval(lower, point, upper, 'Custom Interval');
        ciSummary.innerHTML = `
          <p><strong>Margin of Error</strong> (ป้อนเอง) = ${margin.toFixed(2)}</p>
          <p>ช่วง: (${lower.toFixed(2)}, ${upper.toFixed(2)})</p>
          <p class="muted">ใช้เมื่อต้องการแทนค่า Critical × SE ด้วยค่าที่คำนวณจากโมเดลเฉพาะ</p>
        `;
      }
    }

    modeSelect.addEventListener('change', update);
    [meanXbar, meanSigma, meanN, meanLevel, propPhat, propN, propLevel, customPoint, customMargin].forEach(el => el.addEventListener('input', update));

    update();
  </script>
</body>
</html>
