<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>บทที่ 23 • บทนำสู่การทดสอบสมมติฐาน</title>
  <meta name="description" content="ทำความเข้าใจกรอบคิดของการทดสอบสมมติฐาน ตั้งแต่การตั้ง H0/H1 ไปจนถึงความผิดพลาดแบบที่ 1 และ 2 พร้อมแผนภาพโต้ตอบ" />
  <link rel="stylesheet" href="assets/lesson-theme.css" />
</head>
<body>
  <main class="page">
    <header class="hero">
      <span class="badge">บทเรียนที่ 23</span>
      <h1>บทนำสู่การทดสอบสมมติฐาน</h1>
      <p class="lead">
        จาก “นักสืบ” สู่ “ผู้พิพากษา”—ใช้ข้อมูลตัวอย่างตัดสินคำกล่าวอ้างเกี่ยวกับประชากรอย่างมีระบบ รู้จักคู่ความ H₀/H₁ และความเสี่ยงของการตัดสินพลาด
      </p>
      <div class="stat-grid">
        <div class="stat"><span class="label">บทบาท</span><span class="value">ผู้พิพากษา</span></div>
        <div class="stat"><span class="label">จุดเริ่ม</span><span class="value">สันนิษฐาน H₀</span></div>
        <div class="stat"><span class="label">ความเสี่ยง</span><span class="value">Type I &amp; II</span></div>
      </div>
    </header>

    <section class="card">
      <h2>1. กระบวนการตัดสินใจ</h2>
      <p>
        การทดสอบสมมติฐาน (Hypothesis Testing) เป็นขั้นตอนที่ใช้ข้อมูลตัวอย่างในการตัดสินใจว่าจะ “ปฏิเสธ” หรือ “ไม่ปฏิเสธ” สมมติฐานเกี่ยวกับประชากร โดยเรายึดหลัก <strong>จำเลยบริสุทธิ์จนกว่าจะพิสูจน์ได้ว่าผิด</strong>
      </p>
    </section>

    <section class="card">
      <h2>2. คู่ความ: H₀ และ H₁</h2>
      <div class="grid two">
        <div class="highlight-box">
          <strong>สมมติฐานหลัก (H₀)</strong>
          <ul>
            <li>สถานะเดิม / คำกล่าวอ้างดั้งเดิม</li>
            <li>มักมีเครื่องหมาย =, ≤ หรือ ≥</li>
            <li>ถือว่าเป็นจริงจนกว่าจะมีหลักฐานพอปฏิเสธ</li>
          </ul>
        </div>
        <div class="highlight-box">
          <strong>สมมติฐานแย้ง (H₁ หรือ Hₐ)</strong>
          <ul>
            <li>สิ่งที่นักวิจัยอยากพิสูจน์</li>
            <li>มีเครื่องหมาย ≠, &lt; หรือ &gt;</li>
            <li>เป็น “โจทก์” ที่ต้องหาหลักฐานมาหักล้าง H₀</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>3. ความผิดพลาดที่อาจเกิดขึ้น</h2>
      <div class="grid two">
        <div class="highlight-box">
          <strong>Type I Error (α)</strong>
          <p>ปฏิเสธ H₀ ทั้งที่ H₀ จริง &rarr; เหมือนตัดสินว่าผิดทั้งที่จำเลยบริสุทธิ์</p>
        </div>
        <div class="highlight-box">
          <strong>Type II Error (β)</strong>
          <p>ไม่ปฏิเสธ H₀ ทั้งที่ H₀ เท็จ &rarr; ปล่อยจำเลยที่ผิดจริงให้รอด</p>
        </div>
      </div>
      <p class="note">ลด α มักทำให้ β เพิ่มขึ้น และในทางกลับกัน</p>
    </section>

    <section class="card">
      <h2>4. รูปแบบของการทดสอบ</h2>
      <div class="grid three">
        <div class="highlight-box"><strong>สองหาง</strong><p>H₁: μ ≠ μ₀</p></div>
        <div class="highlight-box"><strong>หางขวา</strong><p>H₁: μ &gt; μ₀</p></div>
        <div class="highlight-box"><strong>หางซ้าย</strong><p>H₁: μ &lt; μ₀</p></div>
      </div>
      <p>รูปแบบของ H₁ เป็นตัวกำหนดพื้นที่ปฏิเสธ (Rejection Region) บนกราฟ</p>
    </section>

    <section class="card">
      <h2>5. ขั้นตอนสรุป</h2>
      <ol>
        <li>ตั้ง H₀ และ H₁ อย่างชัดเจน</li>
        <li>เลือกระดับนัยสำคัญ (α)</li>
        <li>คำนวณค่าสถิติทดสอบ</li>
        <li>ตัดสินด้วยวิธีค่าวิกฤตหรือ p-value</li>
        <li>ตีความผลในภาษาที่ไม่ใช่คณิตศาสตร์</li>
      </ol>
    </section>

    <section class="card">
      <h2>แผนภาพโต้ตอบ: Type I vs Type II</h2>
      <p>ปรับระดับนัยสำคัญ (α), ขนาดตัวอย่าง และขนาดเอฟเฟกต์ เพื่อดูว่าความเสี่ยงของความผิดพลาดแต่ละแบบเปลี่ยนไปอย่างไร (สมมติทดสอบหางขวา)</p>
      <div class="playground">
        <form id="ht-intro-form">
          <div class="control-group inline">
            <label>
              <span>ระดับนัยสำคัญ α</span>
              <input type="number" name="alpha" value="0.05" min="0.001" max="0.2" step="0.005" />
            </label>
            <label>
              <span>ขนาดเอฟเฟกต์ (หน่วยของ σ)</span>
              <input type="number" name="effect" value="1.0" min="0" max="5" step="0.1" />
            </label>
            <label>
              <span>ขนาดตัวอย่าง (n)</span>
              <input type="number" name="n" value="25" min="1" max="500" step="1" />
            </label>
          </div>
        </form>
        <div class="result-board">
          <div class="stat-grid" id="ht-intro-stats"></div>
          <p class="note">สมมติ σ = 1 และทดสอบ H₀: μ = 0 vs H₁: μ &gt; 0</p>
        </div>
        <div class="canvas-wrap">
          <canvas id="ht-intro-canvas" height="240"></canvas>
        </div>
      </div>
    </section>
  </main>

  <script src="assets/lesson-tools.js"></script>
  <script>
    const {
      formatNumber,
      formatPercent,
      normInv,
      normCdf,
      drawTwoNormals,
      attachResizeRedraw
    } = window.LessonTools;

    const form = document.getElementById('ht-intro-form');
    const statsEl = document.getElementById('ht-intro-stats');
    const canvas = document.getElementById('ht-intro-canvas');

    function updateDiagram() {
      const alpha = Math.min(0.5, Math.max(0.0001, parseFloat(form.elements['alpha'].value)));
      const effect = Math.max(0, parseFloat(form.elements['effect'].value));
      const n = Math.max(1, parseFloat(form.elements['n'].value));

      const zCrit = normInv(1 - alpha);
      const shift = effect * Math.sqrt(n);
      const beta = normCdf(zCrit - shift);
      const power = 1 - beta;

      statsEl.innerHTML = '';
      const stats = [
        { label: 'Critical (Z)', value: formatNumber(zCrit, 3) },
        { label: 'Type I Error (α)', value: formatPercent(alpha, 2) },
        { label: 'Type II Error (β)', value: formatPercent(beta, 2) },
        { label: 'Power (1−β)', value: formatPercent(power, 2) }
      ];
      stats.forEach(stat => {
        const div = document.createElement('div');
        div.className = 'stat';
        div.innerHTML = `<span class="label">${stat.label}</span><span class="value">${stat.value}</span>`;
        statsEl.appendChild(div);
      });

      drawTwoNormals(canvas, [
        { mean: 0, sd: 1 / Math.sqrt(n), color: 'rgba(120,193,255,0.9)', fill: 'rgba(120,193,255,0.2)', shade: [zCrit / Math.sqrt(n), 999] },
        { mean: effect, sd: 1 / Math.sqrt(n), color: 'rgba(255,126,150,0.85)', fill: 'rgba(255,126,150,0.2)', shade: [-999, zCrit / Math.sqrt(n)] }
      ]);
    }

    form.addEventListener('input', updateDiagram);
    form.addEventListener('change', updateDiagram);
    updateDiagram();
    attachResizeRedraw(canvas, updateDiagram);
  </script>
</body>
</html>
