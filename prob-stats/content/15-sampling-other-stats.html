<!DOCTYPE html>
<html class="theme-light" lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="บทที่ 15 ขยายแนวคิดการแจกแจงของสถิติตัวอย่างไปยังสัดส่วน ผลต่างของค่าเฉลี่ย ความแปรปรวน และอัตราส่วนความแปรปรวน พร้อมเครื่องมือคำนวณ Standard Error แบบโต้ตอบ" />
  <title>บทที่ 15 • การแจกแจงของสถิติตัวอย่างอื่น ๆ</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="print.css" media="print" />
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]']]
      },
      svg: { fontCache: 'global' },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea']
      }
    };
  </script>
  <script defer src="assets/js/reading-tools.js"></script>
  <style>
    :root {
      color-scheme: dark;
      --bg: #05040c;
      --surface: rgba(13, 16, 32, 0.92);
      --surface-alt: rgba(18, 22, 40, 0.85);
      --surface-soft: rgba(24, 28, 48, 0.7);
      --text: #f4f6ff;
      --muted: #9aa4c8;
      --accent: #b48bff;
      --accent-soft: rgba(180, 139, 255, 0.18);
      --border: rgba(180, 139, 255, 0.18);
    }

    body {
      margin: 0;
      background: radial-gradient(circle at 16% -6%, rgba(180, 139, 255, 0.22), transparent 58%),
                  radial-gradient(circle at 88% 5%, rgba(110, 208, 255, 0.18), transparent 60%),
                  var(--bg);
      color: var(--text);
      font: 16px/1.75 'Sarabun', 'Noto Sans Thai', system-ui, sans-serif;
    }

    header {
      background: linear-gradient(135deg, rgba(20, 22, 44, 0.95), rgba(180, 139, 255, 0.25));
      border-bottom: 1px solid var(--border);
      box-shadow: 0 18px 48px rgba(6, 10, 24, 0.55);
    }

    header .wrap,
    main,
    footer .wrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1.25rem 1.4rem 1.6rem;
    }

    h1,
    h2,
    h3 { line-height: 1.25; margin: 0.25rem 0 0.6rem; }
    h1 { font-size: clamp(1.9rem, 4vw, 2.5rem); }
    h2 { font-size: clamp(1.34rem, 3vw, 1.88rem); }
    h3 { font-size: clamp(1.12rem, 2.6vw, 1.4rem); }

    p,
    ul,
    ol { margin: 0.45rem 0 0.75rem; }

    .hero {
      background: var(--surface);
      border-radius: 22px;
      border: 1px solid var(--border);
      padding: clamp(1.35rem, 2.4vw, 2.1rem);
      display: grid;
      gap: 0.9rem;
      box-shadow: 0 20px 52px rgba(7, 10, 22, 0.5);
    }

    .hero p { color: var(--muted); margin: 0; }

    .eyebrow {
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
      font-size: 0.78rem;
    }

    .pill-row { display: flex; flex-wrap: wrap; gap: 0.55rem; }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      background: rgba(26, 26, 54, 0.82);
      border-radius: 999px;
      padding: 0.4rem 0.95rem;
      border: 1px solid rgba(255, 255, 255, 0.06);
      font-size: 0.88rem;
    }

    main.wrap,
    main,
    .wrap main { display: grid; gap: 1.25rem; }

    .card {
      background: var(--surface);
      border-radius: 20px;
      border: 1px solid var(--border);
      padding: clamp(1.1rem, 2vw, 1.75rem);
      box-shadow: 0 18px 44px rgba(7, 10, 20, 0.45);
    }

    .grid { display: grid; gap: 1rem; }
    @media (min-width: 900px) {
      .grid.two { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .grid.three { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }

    .callout {
      background: var(--surface-alt);
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      padding: 0.9rem 1rem;
    }

    .muted { color: var(--muted); }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.6rem;
      font-size: 0.95rem;
    }

    th,
    td {
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      padding: 0.45rem 0.35rem;
      text-align: left;
    }

    th { color: var(--muted); font-weight: 600; }

    .lab {
      background: var(--surface-alt);
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      padding: 1.1rem 1.25rem;
      display: grid;
      gap: 1rem;
    }

    .lab label {
      display: grid;
      gap: 0.3rem;
      font-weight: 600;
      font-size: 0.95rem;
    }

    .lab input,
    .lab select {
      background: rgba(10, 12, 28, 0.65);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 12px;
      padding: 0.55rem 0.75rem;
      color: var(--text);
      font: inherit;
    }

    .svg-box {
      background: var(--surface-soft);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      padding: 0.75rem;
    }

    svg { width: 100%; height: auto; }

    footer {
      border-top: 1px solid var(--border);
      background: rgba(8, 10, 24, 0.9);
    }

    footer p { margin: 0; color: var(--muted); font-size: 0.92rem; }
  </style>
</head>
<body>
  <header>
    <div class="wrap hero">
      <span class="eyebrow">บทที่ 15</span>
      <h1>การแจกแจงของสถิติตัวอย่างอื่น ๆ</h1>
      <p>ต่อยอดจาก CLT ไปสู่ค่าสถิติหลัก ๆ ที่ใช้จริงในงานอนุมาน: สัดส่วน ผลต่างค่าเฉลี่ย และตัวชี้วัดด้านความแปรปรวน</p>
      <div class="pill-row">
        <span class="pill">Sample Proportion</span>
        <span class="pill">Two-Sample Mean</span>
        <span class="pill">Chi-Square &amp; F</span>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <h2>1. สัดส่วนตัวอย่าง \((\hat{p})\)</h2>
      <p>ใช้กับข้อมูลแบบสำเร็จ/ล้มเหลว (Success/Failure) เช่น โพลสำรวจหรืออัตราของเสีย</p>
      <div class="grid two">
        <article class="callout">
          <h3>เงื่อนไขใช้งาน</h3>
          <ul>
            <li>ตัวอย่างสุ่มและเป็นอิสระ</li>
            <li>ขนาดตัวอย่างใหญ่พอ: \(np \ge 10\) และ \(n(1-p) \ge 10\)</li>
          </ul>
        </article>
        <article class="callout">
          <h3>พารามิเตอร์</h3>
          <p>\[ \mu_{\hat{p}} = p, \quad \sigma_{\hat{p}} = \sqrt{\frac{p(1-p)}{n}} \]</p>
        </article>
      </div>
    </section>

    <section class="card">
      <h2>2. ผลต่างของค่าเฉลี่ยสองกลุ่ม \((\bar{x}_1 - \bar{x}_2)\)</h2>
      <p>ใช้เปรียบเทียบประสิทธิภาพหรือค่าเฉลี่ยระหว่างสองประชากรที่เป็นอิสระ</p>
      <div class="grid two">
        <article class="callout">
          <h3>ทฤษฎี</h3>
          <p>ถ้า \(n_1\) และ \(n_2\) ใหญ่พอ (หรือประชากรปกติ) การแจกแจงของ \(\bar{x}_1 - \bar{x}_2\) จะใกล้ปกติ</p>
        </article>
        <article class="callout">
          <h3>พารามิเตอร์</h3>
          <p>\[ \mu_{\bar{x}_1 - \bar{x}_2} = \mu_1 - \mu_2 \]</p>
          <p>\[ \sigma_{\bar{x}_1 - \bar{x}_2} = \sqrt{\frac{\sigma_1^2}{n_1} + \frac{\sigma_2^2}{n_2}} \]</p>
        </article>
      </div>
    </section>

    <section class="card">
      <h2>3. ความแปรปรวนและอัตราส่วนความแปรปรวน</h2>
      <div class="grid two">
        <article class="callout">
          <h3>ตัวอย่างเดียว</h3>
          <p>สำหรับประชากรปกติ: \(\dfrac{(n-1)s^2}{\sigma^2} \sim \chi^2_{n-1}\)</p>
          <p>ใช้สร้างช่วงความเชื่อมั่นและทดสอบสมมติฐานของ \(\sigma^2\)</p>
        </article>
        <article class="callout">
          <h3>สองตัวอย่าง</h3>
          <p>\(\dfrac{\frac{s_1^2}{\sigma_1^2}}{\frac{s_2^2}{\sigma_2^2}} \sim F_{n_1-1,\, n_2-1}\)</p>
          <p>ใช้เปรียบเทียบความผันผวนของสองประชากร และเป็นพื้นฐานของ ANOVA</p>
        </article>
      </div>
    </section>

    <section class="card" id="tool">
      <h2>4. Interactive Lab: คำนวณ Standard Error / PDF</h2>
      <p>เลือกสถานการณ์ที่สนใจ ใส่ค่าพารามิเตอร์ แล้วดูกราฟของการแจกแจงหรือ Standard Error ที่ได้</p>
      <div class="lab">
        <label>เลือกสถิติ
          <select id="stat-select">
            <option value="prop">สัดส่วนตัวอย่าง \(\hat{p}\)</option>
            <option value="diff">ผลต่างค่าเฉลี่ย \(\bar{x}_1 - \bar{x}_2\)</option>
            <option value="chi">ความแปรปรวนตัวอย่าง (χ²)</option>
            <option value="f">อัตราส่วนความแปรปรวน (F)</option>
          </select>
        </label>
        <div id="inputs-prop" class="grid two">
          <label>ขนาดตัวอย่าง \(n\)
            <input id="prop-n" type="number" value="120" min="1" step="1" />
          </label>
          <label>สัดส่วนประชากร \(p\)
            <input id="prop-p" type="number" value="0.3" min="0.01" max="0.99" step="0.01" />
          </label>
        </div>
        <div id="inputs-diff" class="grid two" hidden>
          <label>ขนาดตัวอย่างกลุ่ม 1 (\(n_1\))
            <input id="diff-n1" type="number" value="60" min="1" step="1" />
          </label>
          <label>ขนาดตัวอย่างกลุ่ม 2 (\(n_2\))
            <input id="diff-n2" type="number" value="55" min="1" step="1" />
          </label>
          <label>\(\sigma_1\)
            <input id="diff-s1" type="number" value="8" min="0.1" step="0.1" />
          </label>
          <label>\(\sigma_2\)
            <input id="diff-s2" type="number" value="10" min="0.1" step="0.1" />
          </label>
          <label>\(\mu_1\)
            <input id="diff-m1" type="number" value="75" step="0.1" />
          </label>
          <label>\(\mu_2\)
            <input id="diff-m2" type="number" value="70" step="0.1" />
          </label>
        </div>
        <div id="inputs-chi" class="grid two" hidden>
          <label>ขนาดตัวอย่าง \(n\)
            <input id="chi-n" type="number" value="25" min="2" step="1" />
          </label>
          <label>ส่วนเบี่ยงเบนมาตรฐานประชากร \(\sigma\)
            <input id="chi-sigma" type="number" value="5" min="0.1" step="0.1" />
          </label>
        </div>
        <div id="inputs-f" class="grid two" hidden>
          <label>df เศษ (\(n_1-1\))
            <input id="f-df1" type="number" value="10" min="1" step="1" />
          </label>
          <label>df ส่วน (\(n_2-1\))
            <input id="f-df2" type="number" value="12" min="1" step="1" />
          </label>
        </div>
        <div class="svg-box">
          <svg id="stat-svg" viewBox="0 0 460 260" role="img" aria-label="กราฟแสดงการแจกแจงหรือ standard error ของสถิติที่เลือก"></svg>
        </div>
        <div class="callout" id="tool-summary"></div>
      </div>
    </section>

    <section class="card">
      <h2>5. ภาพรวมก่อนเข้าสู่บทช่วงความเชื่อมั่น &amp; การทดสอบสมมติฐาน</h2>
      <table>
        <thead>
          <tr><th>ค่าสถิติ</th><th>การแจกแจง</th><th>เงื่อนไขสำคัญ</th></tr>
        </thead>
        <tbody>
          <tr><td>\(\hat{p}\)</td><td>ปกติ (เมื่อเงื่อนไข np ≥ 10)</td><td>สุ่มและเป็นอิสระ</td></tr>
          <tr><td>\(\bar{x}_1 - \bar{x}_2\)</td><td>ปกติ / t</td><td>สองตัวอย่างอิสระ</td></tr>
          <tr><td>\(s^2\)</td><td>χ²</td><td>ประชากรปกติ</td></tr>
          <tr><td>\(\dfrac{s_1^2}{s_2^2}\)</td><td>F</td><td>ประชากรปกติทั้งคู่</td></tr>
        </tbody>
      </table>
    </section>

    <section class="card">
      <h2>Self Check 🔍</h2>
      <ol>
        <li>ทำไม \(\hat{p}\) จึงต้องตรวจสอบเงื่อนไข \(np\) และ \(n(1-p)\)?</li>
        <li>หาก \(\sigma_1\) และ \(\sigma_2\) ไม่ทราบ เราควรใช้อะไรแทนเมื่อคำนวณ Standard Error?</li>
        <li>สถิติใดที่ใช้ตรวจสอบว่าความแปรปรวนของสองสายการผลิตต่างกัน?</li>
      </ol>
      <details>
        <summary>เฉลย</summary>
        <ul>
          <li>เพื่อให้การประมาณด้วยโค้งปกติแม่นยำ (จำนวนสำเร็จ/ล้มเหลวต้องไม่น้อยเกินไป)</li>
          <li>ใช้ส่วนเบี่ยงเบนมาตรฐานของตัวอย่าง (\(s_1, s_2\)) และมักพึ่งพา t-Distribution</li>
          <li>ใช้อัตราส่วนความแปรปรวนที่มีการแจกแจงแบบ F</li>
        </ul>
      </details>
    </section>
  </main>

  <footer>
    <div class="wrap">
      <p>© 2025 Prob &amp; Stats Interactive Notes — Lesson 15 Sampling Distributions II</p>
    </div>
  </footer>

  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script>
    const statSelect = document.getElementById('stat-select');
    const svg = document.getElementById('stat-svg');
    const summary = document.getElementById('tool-summary');

    const propInputs = document.getElementById('inputs-prop');
    const diffInputs = document.getElementById('inputs-diff');
    const chiInputs = document.getElementById('inputs-chi');
    const fInputs = document.getElementById('inputs-f');

    const propN = document.getElementById('prop-n');
    const propP = document.getElementById('prop-p');

    const diffN1 = document.getElementById('diff-n1');
    const diffN2 = document.getElementById('diff-n2');
    const diffS1 = document.getElementById('diff-s1');
    const diffS2 = document.getElementById('diff-s2');
    const diffM1 = document.getElementById('diff-m1');
    const diffM2 = document.getElementById('diff-m2');

    const chiN = document.getElementById('chi-n');
    const chiSigma = document.getElementById('chi-sigma');

    const fDf1 = document.getElementById('f-df1');
    const fDf2 = document.getElementById('f-df2');

    const lanczosCoefficients = [
      0.99999999999980993,
      676.5203681218851,
      -1259.1392167224028,
      771.32342877765313,
      -176.61502916214059,
      12.507343278686905,
      -0.13857109526572012,
      9.9843695780195716e-6,
      1.5056327351493116e-7
    ];

    function logGamma(z) {
      if (z < 0.5) {
        return Math.log(Math.PI) - Math.log(Math.sin(Math.PI * z)) - logGamma(1 - z);
      }
      z -= 1;
      let x = lanczosCoefficients[0];
      const g = 7;
      for (let i = 1; i < lanczosCoefficients.length; i++) {
        x += lanczosCoefficients[i] / (z + i);
      }
      const t = z + g + 0.5;
      return 0.5 * Math.log(2 * Math.PI) + (z + 0.5) * Math.log(t) - t + Math.log(x);
    }

    function gamma(z) {
      return Math.exp(logGamma(z));
    }

    function normalPdf(x, mu, sigma) {
      const z = (x - mu) / sigma;
      return Math.exp(-0.5 * z * z) / (sigma * Math.sqrt(2 * Math.PI));
    }

    function chiPdf(x, df) {
      if (x < 0) return 0;
      const coeff = Math.pow(0.5, df / 2) / gamma(df / 2);
      return coeff * Math.pow(x, df / 2 - 1) * Math.exp(-x / 2);
    }

    function fPdf(x, df1, df2) {
      if (x <= 0) return 0;
      const a = df1 / 2;
      const b = df2 / 2;
      const beta = Math.exp(logGamma(a) + logGamma(b) - logGamma(a + b));
      const numerator = Math.pow(df1 / df2, a) * Math.pow(x, a - 1);
      const denominator = beta * Math.pow(1 + (df1 / df2) * x, a + b);
      return numerator / denominator;
    }

    function drawNormal(mu, sigma, label) {
      const lower = mu - 4 * sigma;
      const upper = mu + 4 * sigma;
      const segments = 240;
      const path = [];
      let maxPdf = 0;
      for (let i = 0; i <= segments; i++) {
        const x = lower + (i / segments) * (upper - lower);
        const y = normalPdf(x, mu, sigma);
        if (y > maxPdf) maxPdf = y;
        path.push({ x, y });
      }
      const d = path.map((pt, idx) => {
        const sx = 20 + (pt.x - lower) / (upper - lower) * 420;
        const sy = 210 - (pt.y / maxPdf) * 170;
        return `${idx === 0 ? 'M' : 'L'}${sx.toFixed(2)} ${sy.toFixed(2)}`;
      }).join(' ');

      svg.innerHTML = `
        <rect x="0" y="0" width="460" height="260" rx="22" fill="rgba(255,255,255,0.02)" stroke="rgba(255,255,255,0.05)" />
        <path d="${d}" fill="none" stroke="rgba(180,139,255,0.9)" stroke-width="2" />
        <line x1="20" x2="440" y1="210" y2="210" stroke="rgba(255,255,255,0.08)" />
        <text x="230" y="240" text-anchor="middle" font-size="14" fill="#d0c7f3">${label}</text>
      `;
    }

    function drawChi(df) {
      const upper = Math.max(20, df * 3);
      const segments = 240;
      const path = [];
      let maxPdf = 0;
      for (let i = 0; i <= segments; i++) {
        const x = (i / segments) * upper;
        const y = chiPdf(x, df);
        if (y > maxPdf) maxPdf = y;
        path.push({ x, y });
      }
      const d = path.map((pt, idx) => {
        const sx = 20 + (pt.x / upper) * 420;
        const sy = 210 - (pt.y / maxPdf) * 170;
        return `${idx === 0 ? 'M' : 'L'}${sx.toFixed(2)} ${sy.toFixed(2)}`;
      }).join(' ');

      svg.innerHTML = `
        <rect x="0" y="0" width="460" height="260" rx="22" fill="rgba(255,255,255,0.02)" stroke="rgba(255,255,255,0.05)" />
        <path d="${d}" fill="none" stroke="#7cd7ff" stroke-width="2" />
        <line x1="20" x2="440" y1="210" y2="210" stroke="rgba(255,255,255,0.08)" />
        <text x="230" y="240" text-anchor="middle" font-size="14" fill="#bcd9f7">χ²(df = ${df})</text>
      `;
    }

    function drawF(df1, df2) {
      const upper = Math.min(10, (df2 / df1) * 8);
      const segments = 240;
      const path = [];
      let maxPdf = 0;
      for (let i = 0; i <= segments; i++) {
        const x = (i / segments) * upper;
        const y = fPdf(Math.max(x, 1e-5), df1, df2);
        if (y > maxPdf) maxPdf = y;
        path.push({ x, y });
      }
      const d = path.map((pt, idx) => {
        const sx = 20 + (pt.x / upper) * 420;
        const sy = 210 - (pt.y / maxPdf) * 170;
        return `${idx === 0 ? 'M' : 'L'}${sx.toFixed(2)} ${sy.toFixed(2)}`;
      }).join(' ');

      svg.innerHTML = `
        <rect x="0" y="0" width="460" height="260" rx="22" fill="rgba(255,255,255,0.02)" stroke="rgba(255,255,255,0.05)" />
        <path d="${d}" fill="none" stroke="#ffcf8f" stroke-width="2" />
        <line x1="20" x2="440" y1="210" y2="210" stroke="rgba(255,255,255,0.08)" />
        <text x="230" y="240" text-anchor="middle" font-size="14" fill="#ffe1ba">F(v₁ = ${df1}, v₂ = ${df2})</text>
      `;
    }

    function showInputs(value) {
      propInputs.hidden = value !== 'prop';
      diffInputs.hidden = value !== 'diff';
      chiInputs.hidden = value !== 'chi';
      fInputs.hidden = value !== 'f';
    }

    function update() {
      const mode = statSelect.value;
      showInputs(mode);

      if (mode === 'prop') {
        const n = Math.max(1, Number(propN.value));
        const p = Math.min(0.99, Math.max(0.01, Number(propP.value)));
        const se = Math.sqrt((p * (1 - p)) / n);
        drawNormal(p, se, `Normal(µ = ${p.toFixed(3)}, σ = ${se.toFixed(3)})`);
        summary.innerHTML = `
          <p><strong>Standard Error</strong> = ${se.toFixed(3)}</p>
          <p class="muted">ตรวจสอบเงื่อนไข: np = ${(n * p).toFixed(1)}, n(1-p) = ${(n * (1 - p)).toFixed(1)}</p>
        `;
      } else if (mode === 'diff') {
        const n1 = Math.max(1, Number(diffN1.value));
        const n2 = Math.max(1, Number(diffN2.value));
        const s1 = Math.max(0.01, Number(diffS1.value));
        const s2 = Math.max(0.01, Number(diffS2.value));
        const m1 = Number(diffM1.value);
        const m2 = Number(diffM2.value);
        const mu = m1 - m2;
        const se = Math.sqrt((s1 * s1) / n1 + (s2 * s2) / n2);
        drawNormal(mu, se, `Normal(µ = ${mu.toFixed(2)}, σ = ${se.toFixed(3)})`);
        summary.innerHTML = `
          <p><strong>Standard Error</strong> = ${se.toFixed(3)}</p>
          <p class="muted">ใช้กับตัวอย่างอิสระสองกลุ่ม หากไม่รู้ σ ให้ใช้ s และ t-Distribution</p>
        `;
      } else if (mode === 'chi') {
        const n = Math.max(2, Number(chiN.value));
        const sigma = Math.max(0.01, Number(chiSigma.value));
        const df = n - 1;
        drawChi(df);
        summary.innerHTML = `
          <p>สถิติ \(\dfrac{(n-1)s^2}{\sigma^2}\) มีการแจกแจงแบบ χ²(df = ${df})</p>
          <p class="muted">ช่วงความเชื่อมั่นของ \(\sigma^2\) สร้างจาก quantile ของ χ²</p>
        `;
      } else {
        const df1 = Math.max(1, Number(fDf1.value));
        const df2 = Math.max(1, Number(fDf2.value));
        drawF(df1, df2);
        summary.innerHTML = `
          <p>สถิติ \(\dfrac{s_1^2}{s_2^2}\) มีการแจกแจงแบบ F(v₁ = ${df1}, v₂ = ${df2})</p>
          <p class="muted">ใช้ตรวจสอบความแปรปรวนเท่ากันก่อนทำ ANOVA</p>
        `;
      }
    }

    statSelect.addEventListener('change', update);
    [propN, propP, diffN1, diffN2, diffS1, diffS2, diffM1, diffM2, chiN, chiSigma, fDf1, fDf2].forEach(el => {
      el.addEventListener('input', update);
    });

    update();
  </script>
</body>
</html>
