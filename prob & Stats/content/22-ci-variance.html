<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <title>‡∏ö‡∏ó‡∏ó‡∏µ‡πà 22: ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô (œÉ¬≤)</title>
  <link rel="stylesheet" href="../style.css" />
  <style>
    :root { color-scheme: light dark; }
    body {
      margin: 0;
      font-family: "IBM Plex Sans Thai", "Prompt", "Sarabun", system-ui, sans-serif;
      background: radial-gradient(circle at 16% 18%, rgba(244, 67, 54, 0.22), transparent 65%),
                  radial-gradient(circle at 84% 24%, rgba(233, 30, 99, 0.22), transparent 60%),
                  linear-gradient(180deg, #fff1f1 0%, #ffffff 45%, #ffe9ef 100%);
      min-height: 100vh;
      color: #4a0d1f;
    }
    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: clamp(2rem, 4vw, 3.6rem) clamp(1.4rem, 3vw, 3rem) 4rem;
      display: grid;
      gap: 2.4rem;
    }
    header.hero {
      background: linear-gradient(135deg, #d32f2f, #c2185b);
      color: #fff;
      padding: clamp(2.6rem, 4vw, 3.8rem);
      border-radius: 34px;
      box-shadow: 0 32px 64px rgba(194, 24, 91, 0.28);
      position: relative;
      overflow: hidden;
    }
    header.hero::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 16% 24%, rgba(255,255,255,0.32), transparent 55%),
                  radial-gradient(circle at 82% 70%, rgba(255,255,255,0.24), transparent 60%);
    }
    header.hero h1 { font-size: clamp(2.3rem, 3.2vw, 3.4rem); margin: 0 0 0.9rem; }
    header.hero p { font-size: 1.05rem; line-height: 1.8; max-width: 780px; }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255,255,255,0.18);
      border: 1px solid rgba(255,255,255,0.25);
      padding: 0.45rem 1.2rem;
      border-radius: 999px;
      font-weight: 600;
      letter-spacing: 0.02em;
      margin-bottom: 1.4rem;
    }
    section.card {
      background: rgba(255,255,255,0.92);
      border-radius: 28px;
      padding: clamp(1.9rem, 4vw, 2.6rem);
      box-shadow: 0 26px 55px rgba(194, 24, 91, 0.15);
      backdrop-filter: blur(6px);
      display: grid;
      gap: 1.25rem;
    }
    section.card h2 {
      margin: 0;
      font-size: 1.9rem;
      color: #c2185b;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    article.panel {
      background: rgba(244, 67, 54, 0.08);
      border: 1px solid rgba(194, 24, 91, 0.2);
      border-radius: 22px;
      padding: 1.4rem 1.6rem;
      display: grid;
      gap: 0.7rem;
    }
    .highlight {
      border-left: 5px solid #d81b60;
      padding: 1rem 1.4rem;
      background: rgba(216, 27, 96, 0.1);
      border-radius: 18px;
    }
    ul, p, li { line-height: 1.75; }
    .grid-two { display: grid; gap: 1.4rem; }
    @media (min-width: 960px) { .grid-two { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    .calculator { display: grid; gap: 1rem; }
    label span { font-weight: 600; color: #701730; }
    input[type="number"], input[type="range"] {
      width: 100%;
      padding: 0.75rem 1rem;
      border-radius: 16px;
      border: 1px solid rgba(194, 24, 91, 0.22);
      font-size: 1rem;
      background: rgba(255,255,255,0.96);
    }
    button {
      background: linear-gradient(135deg, #d32f2f, #ad1457);
      color: #fff;
      border: none;
      border-radius: 16px;
      padding: 0.9rem 1.3rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    button:hover { transform: translateY(-2px); box-shadow: 0 18px 34px rgba(211, 47, 47, 0.25); }
    .result-card {
      background: rgba(255, 235, 238, 0.96);
      border: 1px solid rgba(194, 24, 91, 0.2);
      border-radius: 20px;
      padding: 1.1rem 1.4rem;
      display: grid;
      gap: 0.4rem;
    }
    canvas { background: rgba(255, 228, 233, 0.92); border-radius: 20px; padding: 1rem; }
    .note { font-size: 0.95rem; color: #7b1a33; }
  </style>
</head>
<body>
  <main>
    <header class="hero">
      <div class="badge">üë®‚Äçüè´ ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà 22 ¬∑ Variance Interval</div>
      <h1>‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô (œÉ¬≤)</h1>
      <p>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤! ‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏ô‡πÉ‡∏à‡πÅ‡∏Ñ‡πà‡∏Ñ‡πà‡∏≤‡∏Å‡∏•‡∏≤‡∏á ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ ‚Äú‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏°‡∏≤‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô‚Äù ‡∏î‡πâ‡∏ß‡∏¢ ‡∏ö‡∏ó‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡∏Å‡πÅ‡∏à‡∏á‡πÑ‡∏Ñ‡∏™‡πÅ‡∏Ñ‡∏ß‡∏£‡πå (œá¬≤) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ö‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ö‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£.</p>
    </header>

    <section class="card">
      <h2>1. ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤: ‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠</h2>
      <p>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô (œÉ¬≤) ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ö‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ö‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (œÉ) ‡∏ö‡∏≠‡∏Å‡∏ñ‡∏∂‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡∏ú‡∏•‡∏¥‡∏ï‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏Ñ‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏Ñ‡∏á‡∏ß‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà, ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô, ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏≠‡∏ö‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏°‡∏≤‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÉ‡∏î.</p>
    </section>

    <section class="card">
      <h2>2. &amp; 3. ‡∏™‡∏π‡∏ï‡∏£‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö œÉ¬≤</h2>
      <div class="grid-two">
        <article class="panel">
          <p>‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏ö‡∏ö‡∏à‡∏∏‡∏î‡∏Ç‡∏≠‡∏á œÉ¬≤ ‡∏Ñ‡∏∑‡∏≠ s¬≤ (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á) ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡∏Å‡πÅ‡∏à‡∏á‡πÑ‡∏Ñ‡∏™‡πÅ‡∏Ñ‡∏ß‡∏£‡πå‡∏™‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏™‡∏°‡∏°‡∏≤‡∏ï‡∏£.</p>
          <p class="math">\[ \frac{(n-1)s^2}{\chi^2_{\alpha/2,\, n-1}} < \sigma^2 < \frac{(n-1)s^2}{\chi^2_{1-\alpha/2,\, n-1}} \]</p>
          <ul>
            <li>œá¬≤ ‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤ (‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏≤‡∏ü) ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏ä‡πà‡∏ß‡∏á</li>
            <li>œá¬≤ ‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ (‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏≤‡∏ü) ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡∏ä‡πà‡∏ß‡∏á</li>
            <li>‡∏≠‡∏á‡∏®‡∏≤‡∏≠‡∏¥‡∏™‡∏£‡∏∞ df = n ‚àí 1</li>
          </ul>
        </article>
        <article class="panel">
          <h3>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ö‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ö‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô</h3>
          <p>‡∏ô‡∏≥‡∏™‡∏π‡∏ï‡∏£‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô‡∏°‡∏≤‡∏ñ‡∏≠‡∏î‡∏£‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏á</p>
          <p class="math">\[ \sqrt{\frac{(n-1)s^2}{\chi^2_{\alpha/2,\, n-1}}} < \sigma < \sqrt{\frac{(n-1)s^2}{\chi^2_{1-\alpha/2,\, n-1}}} \]</p>
        </article>
      </div>
      <div class="highlight">
        <p>‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏°‡∏°‡∏≤‡∏ï‡∏£ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÇ‡∏Ñ‡πâ‡∏á œá¬≤ ‡πÄ‡∏ö‡πâ‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤ ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô s¬≤ ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∏‡πâ‡∏ô‡πÄ‡∏Ñ‡∏¢‡∏Å‡∏±‡∏ö Z ‡∏´‡∏£‡∏∑‡∏≠ t.</p>
      </div>
    </section>

    <section class="card">
      <h2>4. ‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á</h2>
      <article class="panel">
        <p>‡∏™‡∏∏‡πà‡∏°‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á 20 ‡πÉ‡∏ö ‡πÑ‡∏î‡πâ s¬≤ = 0.015 ‡∏≠‡∏≠‡∏ô‡∏ã‡πå¬≤ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô 95%.</p>
        <ul>
          <li>df = 19, \(œá^2_{0.025,19} = 32.852\)</li>
          <li>\(œá^2_{0.975,19} = 8.907\)</li>
          <li>‡∏ä‡πà‡∏ß‡∏á œÉ¬≤ = (0.0087, 0.0320)</li>
          <li>‡∏ä‡πà‡∏ß‡∏á œÉ = (0.093, 0.179)</li>
        </ul>
        <p class="note">‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°: ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏î‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≤‡∏ß ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á.</p>
      </article>
    </section>

    <section class="card">
      <h2>5. ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö</h2>
      <p>‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ s¬≤, n ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ä‡πà‡∏ß‡∏á‡∏Ç‡∏≠‡∏á œÉ¬≤ ‡πÅ‡∏•‡∏∞ œÉ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏£‡∏≤‡∏ü‡πÑ‡∏Æ‡πÑ‡∏•‡∏ï‡πå‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡πÇ‡∏Ñ‡πâ‡∏á œá¬≤.</p>
      <div class="calculator">
        <label><span>‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (n)</span>
          <input type="number" id="sample" value="20" min="3" />
        </label>
        <label><span>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (s¬≤)</span>
          <input type="number" id="variance" value="0.015" step="0.0001" min="0.000001" />
        </label>
        <label><span>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô (%)</span>
          <input type="range" id="confidence" min="80" max="99" value="95" />
        </label>
        <div class="note">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô: <strong id="confValue">95%</strong></div>
        <button id="calcBtn">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ä‡πà‡∏ß‡∏á</button>
      </div>
      <div class="result-card" id="result" style="display:none"></div>
      <canvas id="chiChart" height="260"></canvas>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jstat@1.9.5/dist/jstat.min.js"></script>
  <script>
    const sampleEl = document.getElementById('sample');
    const varianceEl = document.getElementById('variance');
    const confEl = document.getElementById('confidence');
    const confValueEl = document.getElementById('confValue');
    const resultEl = document.getElementById('result');
    const calcBtn = document.getElementById('calcBtn');
    const ctx = document.getElementById('chiChart').getContext('2d');
    let chart;

    function compute() {
      const n = Math.max(Number.parseInt(sampleEl.value, 10), 3);
      sampleEl.value = n;
      const s2 = Math.max(Number(varianceEl.value), 1e-6);
      const confidence = Number(confEl.value) / 100;
      confValueEl.textContent = `${(confidence * 100).toFixed(0)}%`;
      const alpha = 1 - confidence;
      const df = n - 1;
      const chiUpper = jStat.chisquare.inv(1 - alpha / 2, df); // right tail
      const chiLower = jStat.chisquare.inv(alpha / 2, df); // left tail

      const lowerVar = (df * s2) / chiUpper;
      const upperVar = (df * s2) / chiLower;
      const lowerSd = Math.sqrt(lowerVar);
      const upperSd = Math.sqrt(upperVar);

      resultEl.style.display = 'grid';
      resultEl.innerHTML = `
        <strong>‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô ${(confidence * 100).toFixed(1)}%</strong>
        <span>œá¬≤ ‡∏Ç‡∏ß‡∏≤ = ${chiUpper.toFixed(3)}, œá¬≤ ‡∏ã‡πâ‡∏≤‡∏¢ = ${chiLower.toFixed(3)} (df = ${df})</span>
        <span>œÉ¬≤ ‚àà [${lowerVar.toFixed(4)}, ${upperVar.toFixed(4)}]</span>
        <span>œÉ ‚àà [${lowerSd.toFixed(3)}, ${upperSd.toFixed(3)}]</span>
        <span class="note">‡∏ä‡πà‡∏ß‡∏á‡πÑ‡∏°‡πà‡∏™‡∏°‡∏°‡∏≤‡∏ï‡∏£‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡∏Å‡πÅ‡∏à‡∏á‡πÑ‡∏Ñ‡∏™‡πÅ‡∏Ñ‡∏ß‡∏£‡πå‡∏°‡∏µ‡∏´‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡∏¢‡∏≤‡∏ß‡∏Å‡∏ß‡πà‡∏≤</span>
      `;

      const maxVar = upperVar * 1.15;
      const points = 200;
      const xs = [];
      const base = [];
      const fill = [];
      for (let i = 0; i <= points; i += 1) {
        const x = (maxVar * i) / points;
        xs.push(x.toFixed(4));
        const scaled = (df * x) / s2;
        const density = jStat.chisquare.pdf(scaled, df) * (df / s2);
        base.push(density);
        fill.push(x >= lowerVar && x <= upperVar ? density : null);
      }

      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: xs,
          datasets: [
            {
              label: '‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡∏Å‡πÅ‡∏à‡∏á‡∏Ç‡∏≠‡∏á œÉ¬≤',
              data: base,
              borderColor: 'rgba(194,24,91,0.45)',
              backgroundColor: 'rgba(194,24,91,0.08)',
              borderWidth: 2.6,
              pointRadius: 0,
              tension: 0.25
            },
            {
              label: '‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô',
              data: fill,
              borderColor: 'rgba(211,47,47,0.9)',
              backgroundColor: 'rgba(211,47,47,0.25)',
              borderWidth: 3,
              pointRadius: 0,
              tension: 0.25,
              fill: true
            }
          ]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { labels: { color: '#7b1a33' } },
            tooltip: {
              callbacks: {
                label: (ctx) => `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô ‚âà ${Number(ctx.raw).toFixed(4)}`
              }
            }
          },
          scales: {
            x: {
              ticks: { color: '#7b1a33', maxRotation: 0 },
              title: { display: true, text: '‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ', color: '#7b1a33' }
            },
            y: {
              ticks: { color: '#7b1a33' },
              title: { display: true, text: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô', color: '#7b1a33' }
            }
          }
        }
      });
    }

    [sampleEl, varianceEl].forEach(el => el.addEventListener('input', compute));
    confEl.addEventListener('input', compute);
    calcBtn.addEventListener('click', compute);
    compute();
  </script>
</body>
</html>
